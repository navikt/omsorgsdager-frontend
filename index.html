<html>
    <head>
        <title>Sykdom</title>
        <style>
            body {
                font-family: 'Source Sans Pro', Arial, sans-serif;
                font-size: 1rem;
            }
        </style>
    </head>
    <body>
        <div id="app"></div>
        <script type="text/javascript">
          /* FORMSTATE MOCK */
          const state = {};

          const getState = (key) => {
            console.log(`getState med ${key} gir ${state[key]}`);
            try {
              return JSON.parse(state[key]);
            } catch {
              return null;
            }
          }
          const deleteState = (key) => {
            console.log(`deleteState med ${key}`);
            delete state[key];
          };
          const setState = (key, data) => {
            console.log(`setState til ${key} med data:`, data);
            state[key] = JSON.stringify(data);
          };

          const formState = {
            getState,
            deleteState,
            setState
          };
          /* END OF FORMSTATE MOCK*/

          const inputMocks = {
            korrigerePerioder: {
              visKomponent: 'KorrigerePerioder',
              props: {
                aksjonspunktLost: false,
                lesemodus: false,
                informasjonTilLesemodus: {
                  begrunnelse: 'Begrunnelse til lesemodus',
                  vilkarOppfylt: false
                },
                losAksjonspunkt: (fravaerGrunnetSmittevernhensynEllerStengt, begrunnelse) => console.log(fravaerGrunnetSmittevernhensynEllerStengt, begrunnelse),
                formState
              }
            },
            vilkarKroniskSyktBarn: {
              visKomponent: 'VilkarKroniskSyktBarn',
              props: {
                behandlingsID: '123',
                aksjonspunktLost: false,
                lesemodus: false,
                informasjonTilLesemodus: {
                  begrunnelse: 'Begrunnelse til lesemodus',
                  vilkarOppfylt: false,
                  avslagsArsakErIkkeRiskioFraFravaer: true
                },
                losAksjonspunkt: (endreHarDokumentasjonOgFravaerRisiko, begrunnelse, avslagsKode) => console.log(endreHarDokumentasjonOgFravaerRisiko, begrunnelse, avslagsKode),
                vedtakFattetVilkarOppfylt: false,
                informasjonOmVilkar: {
                  begrunnelse: 'begrunnelse',
                  navnPåAksjonspunkt: 'Utvidet rett',
                  vilkarOppfylt: true,
                  vilkar: '§ 9-3 vilkar'
                },
                formState,
              }
            },
            vilkarMidlertidigAlene: {
              visKomponent: 'VilkarMidlertidigAlene',
              props: {
                behandlingsID: '123',
                aksjonspunktLost: false,
                lesemodus: false,
                soknadsopplysninger: {
                  årsak: 'Årsak',
                  beskrivelse: 'Beskrivelse',
                  periode: 'DD.MM.ÅÅÅÅ - DD.MM.ÅÅÅÅ',
                  soknadsdato: '2021-04-06'
                },
                vedtakFattetVilkarOppfylt: false,
                informasjonOmVilkar: {
                  begrunnelse: 'begrunnelse',
                  navnPåAksjonspunkt: 'Utvidet rett',
                  vilkarOppfylt: false,
                  vilkar: '§ 9-3 vilkar'
                },
                informasjonTilLesemodus: {
                  begrunnelse: 'Begrunnelse',
                  vilkarOppfylt: false,
                  dato: {
                    fra: '2021-06-06',
                    til: '2021-10-03'
                  },
                  avslagsArsakErPeriodeErIkkeOverSeksMån: true
                },
                losAksjonspunkt: ({
                                    begrunnelse,
                                    erSokerenMidlertidigAleneOmOmsorgen,
                                    fra,
                                    til,
                                    avslagsArsakErPeriodeErIkkeOverSeksMån
                                  }) => console.log(begrunnelse, erSokerenMidlertidigAleneOmOmsorgen, fra, til, avslagsArsakErPeriodeErIkkeOverSeksMån),
                formState,
              }
            },
            omsorg: {
              visKomponent: 'Omsorg',
              props: {
                behandlingsID: '123',
                fagytelseType: 'OMP_KS',
                aksjonspunktLost: false,
                lesemodus: false,
                informasjonTilLesemodus: {
                  begrunnelse: 'Begrunnelse til lesemodus',
                  vilkarOppfylt: false
                },
                barn: ['01010050053', '34324'],
                vedtakFattetVilkarOppfylt: false,
                informasjonOmVilkar: {
                  begrunnelse: 'begrunnelse',
                  navnPåAksjonspunkt: 'Utvidet rett',
                  vilkarOppfylt: true,
                  vilkar: '§ 9-3 vilkar'
                },
                losAksjonspunkt: (harOmsorgen, begrunnelse) => console.log(harOmsorgen, begrunnelse),
                formState,
              }
            },
            aleneOmOmsorgen: {
              visKomponent: 'AleneOmOmsorgen',
              props: {
                behandlingsID: '123',
                aksjonspunktLost: false,
                lesemodus: false,
                fraDatoFraSoknad: '2021-04-06',
                vedtakFattetVilkarOppfylt: false,
                informasjonOmVilkar: {
                  begrunnelse: 'begrunnelse',
                  navnPåAksjonspunkt: 'Utvidet rett',
                  vilkarOppfylt: true,
                  vilkar: '§ 9-3 vilkar'
                },
                informasjonTilLesemodus: {
                  begrunnelse: 'Begrunnelse',
                  vilkarOppfylt: false,
                  dato: {
                    fra: '2021-06-06',
                    til: '2021-10-03'
                  },
                  avslagsArsakErPeriodeErIkkeOverSeksMån: true
                },
                losAksjonspunkt: ({
                                    begrunnelse,
                                    vilkarOppfylt,
                                    fraDato,
                                    avslagsArsakErPeriodeErIkkeOverSeksMån
                                  }) => console.log(begrunnelse, vilkarOppfylt, fraDato),
                formState,
              }
            }
        };


          setTimeout(() => {
            window.renderMicrofrontendOmsorgsdagerApp('app', inputMocks.aleneOmOmsorgen);
          }, 300);
        </script>
    </body>
</html>
